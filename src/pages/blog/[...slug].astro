---
import { type CollectionEntry, getCollection } from "astro:content";
import PageLayout from "@layouts/PageLayout.astro";
import Container from "@components/Container.astro";

export async function getStaticPaths() {
    const posts = (await getCollection("blog"))
        .filter(post => !post.data.draft)
        .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
    return posts.map((post) => ({
        params: { slug: post.slug },
        props: post,
    }));
}
type Props = CollectionEntry<"blog">;

const post = Astro.props;
const { Content } = await post.render();
---

<PageLayout title="title" description="description">
    <Container>
        <div>
            <a href="/blog">
                Back to blog
            </a>
        </div>
        <div>
            <div>
                <div>
                   date
                </div>
                &bull;
                <div>
                   2 mn
                </div>
            </div>
            <div>
               title
            </div>
        </div>
        <article>
            <Content />
        </article>
    </Container>
</PageLayout>